webpackJsonp([0],[,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=n(0),c=n(3),f=r(c),p=n(5),h=r(p),d=n(6),m=r(d),y=n(7),b=r(y),g=n(8),v=r(g),w=n(9),O=r(w),_=n(10),x=r(_),j=n(11),k=r(j),C=n(12),S=(r(C),{token:null,communities:[],email:null,name:null}),P=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={};var r=sessionStorage.getItem("user");return r&&n.setState(JSON.parse(r)),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){if(window.location.search){var e=window.location.search.indexOf("key=");if(e>0){var t=window.location.search.substring(e+4);(0,u.route)("/reset-password/"+t)}}}},{key:"signin",value:function(e,t){var n=this;fetch("/api/user/"+e+"/sign-in",{method:"post",body:t,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){n.setState(e),sessionStorage.setItem("user",JSON.stringify(e)),sessionStorage.setItem("token","Bearer"+e.token),(0,u.route)("/")})}},{key:"signout",value:function(){sessionStorage.setItem("user",null),sessionStorage.setItem("token",null),this.setState(Object.assign({},S))}},{key:"render",value:function(){var e=this;return(0,l.h)("article",{className:"app"},(0,l.h)(x.default,{title:"Your free ads here ðŸ˜Ž"}),(0,l.h)("div",{style:"display: flex"},(0,l.h)(k.default,{signout:function(){return e.signout()},username:this.state.name,communities:this.state.communities}),(0,l.h)(u.Router,null,(0,l.h)(f.default,{path:"/"}),(0,l.h)(h.default,{path:"/community"}),(0,l.h)(b.default,{path:"/sign-in",onSubmit:function(t,n){return e.signin(t,n)}}),(0,l.h)(v.default,{path:"/forgotten-password"}),(0,l.h)(O.default,{path:"/reset-password/:key"}),(0,l.h)(m.default,{path:"/admin"}))))}}]),t}(l.Component);(0,l.render)((0,l.h)(P,null),document.body);var E=n(16);E.install({onUpdateReady:function(){E.applyUpdate()},onUpdated:function(){window.location.reload()}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(4),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={ads:[]},n}return a(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/advert",{headers:{Authorization:sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({ads:t})})}},{key:"render",value:function(){var e=this.state.ads.map(function(e,t){return(0,s.h)(l.default,{id:"ad"+t,title:e.title,content:e.content,author:e.author.name,email:e.author.email,community:e.sponsor.name})});return(0,s.h)("main",{style:"display: flex; width: 100%"},(0,s.h)("p",{className:"ads",style:"flex: 1; display: flex;"},e),(0,s.h)("aside",null,(0,s.h)("img",{src:"https://domain.me/wp-content/uploads/2014/04/dont-hack-them.png",style:"width:300px; margin-left: 20px;"})))}}]),t}(s.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return(0,r.h)("article",{className:"card"},(0,r.h)("header",null,(0,r.h)("strong",null,e.title)),(0,r.h)("p",{id:e.id}),(0,r.h)("script",null,"var html = `",e.content,"`; var container = document.getElementById('",e.id,"'); var range = document.createRange(); range.setStart(container, 0); container.appendChild(range.createContextualFragment(html));"),(0,r.h)("footer",null,"Author: ",(0,r.h)("a",{href:"mailto:"+e.email},e.author)," pour ",e.community))};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={communities:[]},n}return a(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/user",{headers:{Authorization:sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({communities:t})})}},{key:"render",value:function(){var e=this.state.communities.map(function(e){var t=e.users.map(function(e){return(0,s.h)("li",null,(0,s.h)("a",{href:"mailto:"+e.email},e.name))});return(0,s.h)("article",{className:"card"},(0,s.h)("h3",null,e.name),(0,s.h)("ul",null,t))});return(0,s.h)("main",{style:"width: 100%"},(0,s.h)("h2",null,"Your communities"),(0,s.h)("p",{className:"users",style:"flex: 1; display: flex;"},e))}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={configs:[]},n}return a(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/admin",{method:"get",headers:{Authorization:sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){return e.setState({configs:t})})}},{key:"render",value:function(){var e=this.state.configs.map(function(e){return(0,s.h)("article",{className:"card"},(0,s.h)("header",null,(0,s.h)("strong",null,e.key)),(0,s.h)("textarea",{style:"width: 100%"},e.decryptedValue?e.decryptedValue:e.value))});return(0,s.h)("main",{style:"width: 100%"},(0,s.h)("h2",null,"Admin"),e)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:null,password:null},n}return a(t,e),i(t,[{key:"emailChange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;return(0,s.h)("main",null,(0,s.h)("form",{style:"display: flex; flex-direction: column;"},(0,s.h)("input",{type:"text",required:!0,placeholder:"Email",name:"username",value:this.state.email,onChange:function(t){return e.emailChange(t)}}),(0,s.h)("input",{type:"password",required:!0,placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.passwordChange(t)}}),(0,s.h)("a",{href:"/forgotten-password"},"Forget your password?"),(0,s.h)("button",{type:"button",style:"width:60px",onClick:function(){return e.props.onSubmit(e.state.email,e.state.password)}},"OK")))}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:null,message:null},n}return a(t,e),i(t,[{key:"emailChange",value:function(e){this.setState({email:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;fetch(encodeURI("/api/user/"+e+"/forgotten-password")).then(function(){return t.setState({message:"Reset password mail has been sent to "+e})})}},{key:"render",value:function(){var e=this;return(0,s.h)("main",null,!this.state.message&&(0,s.h)("form",{style:"display: flex; flex-direction: column;"},(0,s.h)("input",{type:"text",style:"margin: 10px",required:!0,placeholder:"Email",name:"username",value:this.state.email,onChange:function(t){return e.emailChange(t)}}),(0,s.h)("button",{type:"button",style:"margin: 10px",onClick:function(){return e.onSubmit(e.state.email)}},"Reset password")),this.state.message)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log(e),n.state={email:null,password:null,message:null},n}return a(t,e),i(t,[{key:"emailChange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e,t){var n=this;fetch("/api/user/"+e+"/reset-password/"+this.props.matches.key,{method:"post",body:t,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){if(!(e.status>=200&&e.status<300)){var t=new Error(e.statusText);throw t.response=e,t}n.setState({message:"Your password has been reset"})})}},{key:"render",value:function(){var e=this;return(0,s.h)("main",null,!this.state.message&&(0,s.h)("form",{style:"display: flex; flex-direction: column;"},(0,s.h)("input",{type:"text",required:!0,placeholder:"Email",name:"username",value:this.state.email,onChange:function(t){return e.emailChange(t)}}),(0,s.h)("input",{type:"password",required:!0,placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.passwordChange(t)}}),(0,s.h)("button",{type:"button",style:"width:60px",onClick:function(){return e.onSubmit(e.state.email,e.state.password)}},"OK")),this.state.message)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return(0,r.h)("header",{className:"header"},(0,r.h)("h1",null,e.title))};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return(0,r.h)("section",{className:"side-menu"},e.username&&(0,r.h)("nav",{style:"display: flex",className:"menu-item"},e.username,(0,r.h)("span",{style:"cursor: pointer",onclick:function(){return e.signout()}},"âŒ")),(0,r.h)("nav",{className:"menu-item"},(0,r.h)("a",{href:"/"},"Ads")),e.username&&(0,r.h)("nav",{className:"menu-item"},(0,r.h)("a",{href:"/community"},"Community")),e.communities&&!!e.communities.find(function(e){return e.name.indexOf("admin")>=0})&&(0,r.h)("nav",{className:"menu-item"},(0,r.h)("a",{href:"/admin"},"Admin")),!e.username&&(0,r.h)("nav",{className:"menu-item"},(0,r.h)("a",{href:"/sign-in"},"Sign-in")))};t.default=o},function(e,t,n){var r=n(13);"string"==typeof r&&(r=[[e.i,r,""]]);n(15)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(14)(),t.push([e.i,'.app{font-family:Helvetica,Arial,sans-serif;color:#555}form>*{margin:10px}input[type=text]{width:250px}h1,h2,strong{color:#333}.card{border:1px solid grey;padding:10px;margin:20px;border-radius:10px;padding:30px;overflow:hidden}.card img{max-width:100%;max-height:100%}.card footer{font-size:.7em;text-align:right}.ads{flex-wrap:wrap}.ads article{width:33%;height:fit-content}.users{flex-wrap:wrap}.users article{width:33%;height:fit-content}.header{background-image:url("https://images.unsplash.com/photo-1518798919606-f85926dbc43a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80");padding:30px;margin-bottom:30px;display:flex}.header h1{color:#fff;font-family:fantasy;font-size:5em;margin-bottom:100px;margin-top:0}.side-menu,main{padding:20px}.menu-item{white-space:nowrap;margin:20px}.menu-item a{border:1px solid #e81c4f;border-radius:290486px;color:#fff;font-size:.6em;letter-spacing:.2em;padding:1em 2em;text-transform:uppercase;text-decoration:none;transition:none .2s ease-out;transition-property:color,background;background-color:#90ee90}.menu-item a:hover{background:#e81c4f;color:#fff}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(u(r.parts[a],t))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(u(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:i}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],a=o[0],i=o[1],s=o[2],u=o[3],l={css:i,media:s,sourceMap:u};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function o(e,t){var n=m(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function i(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function u(e,t){var n,r,o;if(t.singleton){var u=b++;n=y||(y=i(t)),r=l.bind(null,n,u,!1),o=l.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(t),r=c.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function l(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function c(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var p={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},d=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,b=0,g=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},void 0===t.singleton&&(t.singleton=d()),void 0===t.insertAt&&(t.insertAt="bottom");var o=r(e);return n(o,t),function(e){for(var a=[],i=0;i<o.length;i++){var s=o[i],u=p[s.id];u.refs--,a.push(u)}if(e){n(r(e),t)}for(var i=0;i<a.length;i++){var u=a[i];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){function n(){return"serviceWorker"in navigator&&(window.fetch||"imageRendering"in document.documentElement.style)&&("https:"===window.location.protocol||"localhost"===window.location.hostname||0===window.location.hostname.indexOf("127."))}function r(e){if(e||(e={}),n()){var t=navigator.serviceWorker.register("sw.js"),r=function(e){function t(){switch(i.state){case"redundant":o("onUpdateFailed"),i.onstatechange=null;break;case"installing":r||o("onUpdating");break;case"installed":a||o("onUpdateReady");break;case"activated":o("onUpdated"),i.onstatechange=null}}function n(){switch(i.state){case"redundant":i.onstatechange=null;break;case"installing":case"installed":break;case"activated":o("onInstalled"),i.onstatechange=null}}var r,a,i=e.installing||e.waiting;if(i&&!i.onstatechange){var s;e.active?(t(),s=t):(n(),s=n),r=!0,e.waiting&&(a=!0),i.onstatechange=s}},o=function(t){"function"==typeof e[t]&&e[t]({source:"ServiceWorker"})};return void t.then(function(e){e&&(r(e),e.onupdatefound=function(){r(e)})}).catch(function(e){return o("onError"),Promise.reject(e)})}}function o(e,t){if(n())return void navigator.serviceWorker.getRegistration().then(function(n){if(!n||!n.waiting)return void(t&&t());n.waiting.postMessage({action:"skipWaiting"}),e&&e()})}function a(){n()&&navigator.serviceWorker.getRegistration().then(function(e){if(e)return e.update()})}t.install=r,t.applyUpdate=o,t.update=a}],[2]);